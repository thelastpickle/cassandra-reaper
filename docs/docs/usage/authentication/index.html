<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <meta name="author" content="" />

  

  

  <meta name="generator" content="Hugo 0.40.3" />

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="http://cassandra-reaper.io/css/animate.css" rel="stylesheet">

  
  
    <link href="http://cassandra-reaper.io/css/style.default.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="http://cassandra-reaper.io/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="http://cassandra-reaper.io/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="http://cassandra-reaper.io/img/apple-touch-icon.png" />
  

  <link href="http://cassandra-reaper.io/css/owl.carousel.css" rel="stylesheet">
  <link href="http://cassandra-reaper.io/css/owl.theme.css" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css" />


  <link rel="alternate" href="http://cassandra-reaper.io/index.xml" type="application/rss+xml" title="Reaper: Easy Repair Management for Apache Cassandra">

  
  <meta property="og:title" content="" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/docs/usage/authentication//" />
  <meta property="og:image" content="" />

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="http://cassandra-reaper.io/">
                    <img src="http://cassandra-reaper.io/img/logo.png" alt=" logo" class="hidden-xs hidden-sm">
                    <img src="http://cassandra-reaper.io/img/logo-small.png" alt=" logo" class="visible-xs visible-sm">
                    <span class="sr-only"> - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  <li class="dropdown">
                    
                    <a href="/docs/">Documentation</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/docs/download/">Downloads</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/faq/">FAQ</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="https://github.com/thelastpickle/cassandra-reaper">View on GitHub</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
            </div>
        </div>
    </div>
</div>


        <div id="content">

            

            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <ul class="sidebar-menu">
    
    
    

    <li class="sub-menu">
    <a href="/docs/download/" class="">
        
        <span>Downloads</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/download/install/"> Install and Run </a> </li>
        
        <li><a href="/docs/download/building/"> Building from Source </a> </li>
        
        <li><a href="/docs/download/docker/"> Docker </a> </li>
        
    </ul>
    
    </li>
    
    
    <li>
        <a href="/docs/concepts/">
            
            <span>Core Concepts</span>
        </a>
        
    </li>
    
    

    <li class="sub-menu">
    <a href="/docs/backends/" class="">
        
        <span>Backends</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/backends/memory/"> In Memory </a> </li>
        
        <li><a href="/docs/backends/h2/"> H2 </a> </li>
        
        <li><a href="/docs/backends/postgres/"> Postgres </a> </li>
        
        <li><a href="/docs/backends/cassandra/"> Cassandra </a> </li>
        
    </ul>
    
    </li>
    
    

    <li class="sub-menu">
    <a href="/docs/configuration/" class="">
        
        <span>Configuration Reference</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/configuration/reaper_specific/"> Reaper Specific Settings </a> </li>
        
        <li><a href="/docs/configuration/backend_specific/"> Backend Specific Settings </a> </li>
        
        <li><a href="/docs/configuration/docker_vars/"> Docker Variables </a> </li>
        
    </ul>
    
    </li>
    
    

    <li class="sub-menu">
    <a href="/docs/metrics/" class="">
        
        <span>Metrics</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/metrics/graphite/"> Graphite Reporter </a> </li>
        
    </ul>
    
    </li>
    
    

    <li class="sub-menu">
    <a href="/docs/usage/" class="">
        
        <span>Using Reaper</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/usage/add_cluster/"> Adding a Cluster </a> </li>
        
        <li><a href="/docs/usage/health/"> Checking a Cluster&#39;s Health </a> </li>
        
        <li><a href="/docs/usage/single/"> Running a Cluster Repair </a> </li>
        
        <li><a href="/docs/usage/schedule/"> Scheduling a Cluster Repair </a> </li>
        
        <li><a href="/docs/usage/multi_dc/"> Operating with a Multi DC Cluster </a> </li>
        
        <li><a href="/docs/usage/authentication/"> Activating Authentication </a> </li>
        
    </ul>
    
    </li>
    
    
    <li>
        <a href="/docs/api/">
            
            <span>Rest API</span>
        </a>
        
    </li>
    
    
    <li>
        <a href="/docs/community/">
            
            <span>Community</span>
        </a>
        
    </li>
    
</ul>
                    </div>

                    <div class="col-md-9">
                        <div>
                          

<h1 id="authentication">Authentication</h1>

<p>Authentication is activated in Reaper by default. It relies on <a href="https://shiro.apache.org/">Apache Shiro</a>, which allows to store users and password in files, databases or connect through LDAP and Active Directory out of the box. The default authentication uses the dummy username and password as found in the default <a href="https://github.com/thelastpickle/cassandra-reaper/blob/master/src/server/src/main/resources/shiro.ini">shiro.ini</a>. It is expected you override this in a production environment.</p>

<p>This default Shiro authentication configuration is referenced via the  following block in the Reaper yaml file :</p>

<pre><code class="language-ini">accessControl:
  sessionTimeout: PT10M
  shiro:
    iniConfigs: [&quot;classpath:shiro.ini&quot;]
</code></pre>

<h2 id="default-settings">Default settings</h2>

<p>As of Reaper 1.4.0, authentication is enabled by default and credentials are:</p>

<ul>
<li>Username: <strong>admin</strong></li>
<li>Password: <strong>admin</strong></li>
</ul>

<h2 id="with-clear-passwords">With clear passwords</h2>

<p>Copy the default <code>shiro.ini</code> file and adapt it overriding the &ldquo;users&rdquo; section :</p>

<pre><code class="language-ini">…

[users]
user1 = password1
user2 = password2

…
</code></pre>

<h2 id="with-encrypted-passwords">With encrypted passwords</h2>

<p>Based on <a href="https://shiro.apache.org/configuration.html#Configuration-EncryptingPasswords">Shiro&rsquo;s document on Encrypting passwords</a> :</p>

<pre><code class="language-ini">[main]
authc = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter
authc.loginUrl = /webui/login.html
sha256Matcher = org.apache.shiro.authc.credential.Sha256CredentialsMatcher
iniRealm.credentialsMatcher = $sha256Matcher

[users]
john = 807A09440428C0A8AEF58BD3ECE32938B0D76E638119E47619756F5C2C20FF3A

…
</code></pre>

<p>To generate a password, you case use for example :</p>

<ul>
<li>From the command line :</li>
</ul>

<pre><code class="language-shell">echo -n &quot;Hello World&quot; | shasum -a 256
echo -n &quot;Hello World&quot; | sha256sum
</code></pre>

<ul>
<li>Or some language of your choice  (like Python here) :</li>
</ul>

<pre><code class="language-python">import hashlib
hash_object = hashlib.sha256(b'Hello World')
hex_dig = hash_object.hexdigest()
print(hex_dig)
a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e
</code></pre>

<h2 id="with-ldap-accounts">With LDAP accounts</h2>

<p>Based on <a href="https://shiro.apache.org/static/1.2.4/apidocs/org/apache/shiro/realm/ldap/JndiLdapContextFactory.html">Shiro&rsquo;s LDAP realm usage</a>.</p>

<p>An example configuration for LDAP authentication exists (commented out) in the default shiro.ini :</p>

<pre><code>
# Example LDAP realm, see https://shiro.apache.org/static/1.2.4/apidocs/org/apache/shiro/realm/ldap/JndiLdapContextFactory.html
ldapRealm = org.apache.shiro.realm.ldap.JndiLdapRealm
ldapRealm.userDnTemplate = uid={0},ou=users,dc=cassandra-reaper,dc=io
ldapRealm.contextFactory.url = ldap://ldapHost:389
;ldapRealm.contextFactory.authenticationMechanism = DIGEST-MD5
;ldapRealm.contextFactory.systemUsername = cn=Manager, dc=example, dc=com
;ldapRealm.contextFactory.systemPassword = secret
;ldapRealm.contextFactory.environment[java.naming.security.credentials] = ldap_password

</code></pre>

<h2 id="accessing-reaper-via-the-command-line-spreaper">Accessing Reaper via the command line <code>spreaper</code></h2>

<p>In order to interact with Reaper through <code>spreaper</code> when Shiro authentication is activated, you will first need to login as follows:</p>

<pre><code>$ ./spreaper login admin
Password: *****
# Logging in...
You are now authenticated to Reaper.
# JWT saved

</code></pre>

<p>The JWT will be saved in <code>~/.reaper/jwt</code> and automatically used by Reaper for any other call.
Pre-existing tokens can be passed to spreaper using <code>--jwt &lt;token&gt;</code> with any call.</p>

<h2 id="accessing-reaper-via-the-rest-api">Accessing Reaper via the REST API</h2>

<p>The RESTful endpoints to Reaper can also be authenticated using JWT (Java Web Token).</p>

<p>A token can be generated from the <code>/jwt</code> url by passing the Session ID cookie retrieved from the <code>/login</code> endpoint.
Logging in through <code>/login</code> is described in the <a href="/docs/api/">REST Api page</a>.</p>

                        </div>

                    </div>

                </div>
                

            </div>
            

            
        </div>
        

        <footer id="footer">
    <div class="container">

        

        <div class="col-md-4 col-sm-6">

            

        </div>
        

        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-right">
              Template by <a href="http://bootstrapious.com/free-templates">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-104925477-1', 'auto');
ga('send', 'pageview');
</script>


<script src="/js/jquery-3.2.1.min.js"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?v=3.exp"></script>

<script src="http://cassandra-reaper.io/js/hpneo.gmaps.js"></script>
<script src="http://cassandra-reaper.io/js/gmaps.init.js"></script>
<script src="http://cassandra-reaper.io/js/front.js"></script>


<script src="http://cassandra-reaper.io/js/owl.carousel.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>



  </body>
</html>
