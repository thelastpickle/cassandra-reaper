<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.69.2" />
    <meta name="description" content="Cassandra Reaper documentation">


    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <title>Cassandra Backend :: Reaper: Easy Repair Management for Apache Cassandra</title>

    
    <link href="/css/nucleus.css?1598595356" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1598595356" rel="stylesheet">
    <link href="/css/hybrid.css?1598595356" rel="stylesheet">
    <link href="/css/featherlight.min.css?1598595356" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1598595356" rel="stylesheet">
    <link href="/css/auto-complete.css?1598595356" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1598595356" rel="stylesheet">
    <link href="/css/theme.css?1598595356" rel="stylesheet">
    <link href="/css/hugo-theme.css?1598595356" rel="stylesheet">
    
    <link href="/css/theme-mine.css?1598595356" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1598595356"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/backends/cassandra/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img src="/img/logo.png"  alt="Reaper logo"></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1598595356"></script>
<script type="text/javascript" src="/js/auto-complete.js?1598595356"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/cassandra-reaper.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1598595356"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/concepts/" title="Core Concepts" class="dd-item 
        
        
        
        ">
      <a href="/concepts/">
          Core Concepts
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/install/" title="Install and Run" class="dd-item 
        
        
        
        ">
      <a href="/install/">
          Install and Run
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/install/install/" title="Package Install Guide" class="dd-item ">
        <a href="/install/install/">
        Package Install Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/install/docker/" title="Docker Guide" class="dd-item ">
        <a href="/install/docker/">
        Docker Guide
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/install/upgrade/" title="Upgrade Guide" class="dd-item ">
        <a href="/install/upgrade/">
        Upgrade Guide
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/backends/" title="Backend Options" class="dd-item 
        parent
        
        
        ">
      <a href="/backends/">
          Backend Options
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/backends/memory/" title="In-Memory Backend" class="dd-item ">
        <a href="/backends/memory/">
        In-Memory
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/backends/h2/" title="H2 Backend" class="dd-item ">
        <a href="/backends/h2/">
        H2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/backends/postgres/" title="Postgres Backend" class="dd-item ">
        <a href="/backends/postgres/">
        Postgres
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/backends/cassandra/" title="Cassandra Backend" class="dd-item active">
        <a href="/backends/cassandra/">
        Cassandra
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/usage/" title="Using Reaper" class="dd-item 
        
        
        
        ">
      <a href="/usage/">
          Using Reaper
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/usage/add_cluster/" title="Adding a Cluster" class="dd-item ">
        <a href="/usage/add_cluster/">
        Adding a Cluster
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/health/" title="Checking a Cluster&#39;s Health" class="dd-item ">
        <a href="/usage/health/">
        Checking a Cluster&#39;s Health
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/single/" title="Running a Cluster Repair" class="dd-item ">
        <a href="/usage/single/">
        Running a Cluster Repair
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/schedule/" title="Scheduling a Cluster Repair" class="dd-item ">
        <a href="/usage/schedule/">
        Scheduling a Cluster Repair
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/multi_dc_non-distributed/" title="Operating Multiple DCs with a Single Reaper" class="dd-item ">
        <a href="/usage/multi_dc_non-distributed/">
        Multi DCs with One Reaper
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/multi_dc_distributed/" title="perating Multiple DCs using Multiple Reaper" class="dd-item ">
        <a href="/usage/multi_dc_distributed/">
        Multi DCs with Multi Reapers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/sidecar_mode/" title="Sidecar Mode" class="dd-item ">
        <a href="/usage/sidecar_mode/">
        Sidecar Mode
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/usage/cassandra-diagnostics/" title="Cassandra Diagnostic Events" class="dd-item ">
        <a href="/usage/cassandra-diagnostics/">
        Cassandra Diagnostic Events
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/configuration/" title="Configuration Reference" class="dd-item 
        
        
        
        ">
      <a href="/configuration/">
          Configuration Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/configuration/reaper_specific/" title="Reaper Specific Settings" class="dd-item ">
        <a href="/configuration/reaper_specific/">
        Reaper Specific Settings
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/configuration/backend_specific/" title="Backend Specific Settings" class="dd-item ">
        <a href="/configuration/backend_specific/">
        Backend Specific Settings
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/configuration/docker_vars/" title="Docker Variables" class="dd-item ">
        <a href="/configuration/docker_vars/">
        Docker Variables
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/configuration/authentication/" title="Authentication" class="dd-item ">
        <a href="/configuration/authentication/">
        Authentication
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/metrics/" title="Metrics Reporting" class="dd-item 
        
        
        
        ">
      <a href="/metrics/">
          Metrics Reporting
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/metrics/graphite/" title="Graphite Reporter" class="dd-item ">
        <a href="/metrics/graphite/">
        Graphite Reporter
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/development/" title="Developer Resources" class="dd-item 
        
        
        
        ">
      <a href="/development/">
          Developer Resources
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            




 
  
    
      <li data-nav-id="/development/building/" title="Build from Source" class="dd-item ">
        <a href="/development/building/">
        Build from Source
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/merging/" title="Forward Merging" class="dd-item ">
        <a href="/development/merging/">
        Forward Merging
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/releases/" title="Cutting a Release" class="dd-item ">
        <a href="/development/releases/">
        Cutting a Release
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/development/api/" title="REST API" class="dd-item ">
        <a href="/development/api/">
        REST API
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/downloads"><i class='fas fa-download'></i> Downloads</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/thelastpickle/cassandra-reaper"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/community"><i class='fas fa-comments'></i> Community</a>
              </li>
          
              <li> 
                  <a class="padding" href="http://cassandra-reaper.io/faq"><i class='fas fa-question-circle'></i> FAQ</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Cassandra Reaper</a> > <a href='/backends/'>Backend Options</a> > Cassandra Backend
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Cassandra Backend
            </h1>
          

        


<p>To use Apache Cassandra as the persistent storage for Reaper, the <code>storageType</code> setting must be set to <strong>cassandra</strong> in the Reaper configuration YAML file. In addition, the connection details for the Apache Cassandra cluster being used to store Reaper data must be specified in the configuration YAML file. An example of how to configure Cassandra as persistent storage for Reaper can be found in the <em><a href="https://github.com/thelastpickle/cassandra-reaper/blob/master/src/packaging/resource/cassandra-reaper-cassandra.yaml">cassandra-reaper-cassandra.yaml</a></em>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">storageType</span>: cassandra
<span style="color:#66d9ef">cassandra</span>:
  <span style="color:#66d9ef">clusterName</span>: <span style="color:#e6db74">&#34;test&#34;</span>
  <span style="color:#66d9ef">contactPoints</span>: [<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>]
  <span style="color:#66d9ef">keyspace</span>: reaper_db
  <span style="color:#66d9ef">queryOptions</span>:
    <span style="color:#66d9ef">consistencyLevel</span>: LOCAL_QUORUM
    <span style="color:#66d9ef">serialConsistencyLevel</span>: SERIAL
</code></pre></div><p>If you&rsquo;re using authentication or SSL:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#66d9ef">storageType</span>: cassandra
<span style="color:#66d9ef">cassandra</span>:
  <span style="color:#66d9ef">clusterName</span>: <span style="color:#e6db74">&#34;test&#34;</span>
  <span style="color:#66d9ef">contactPoints</span>: [<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>]
  <span style="color:#66d9ef">keyspace</span>: reaper_db
  <span style="color:#66d9ef">authProvider</span>:
    <span style="color:#66d9ef">type</span>: plainText
    <span style="color:#66d9ef">username</span>: cassandra
    <span style="color:#66d9ef">password</span>: cassandra
  <span style="color:#66d9ef">ssl</span>:
    <span style="color:#66d9ef">type</span>: jdk
</code></pre></div><p>The Apache Cassandra backend is the only deployment that allows multiple Reaper instances to operate concurrently. This provides high availability and allows to repair multi DC clusters.</p>
<p>To run Reaper using the Cassandra backend, create a reaper_db keyspace with an appropriate placement strategy. This is installation specific, and names of the data centers in the cluster that will host the Reaper data must be specified. For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cql" data-lang="cql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">KEYSPACE</span> reaper_db <span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">replication</span> <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;class&#39;</span>: <span style="color:#e6db74">&#39;NetworkTopologyStrategy&#39;</span>, <span style="color:#e6db74">&#39;&lt;data_center&gt;&#39;</span>: <span style="color:#ae81ff">3</span>};
</code></pre></div><p>Where:</p>
<ul>
<li><code>&lt;data_center&gt;</code> is the name of the Cassandra data center that will contain the keyspace replicas.</li>
</ul>
<p>When operating Reaper in a production environment, it is recommended that:</p>
<ul>
<li>An RF (Replication Factor) of 3 be used in each data center for the <code>reaper_db</code> keyspace. This is to ensure that all Reaper state data is still available should a node in the cluster be unavailable.</li>
<li>The <code>NetworkTopologyStrategy</code> should be used for the replication strategy of the keyspace. This is because <code>LOCAL_*</code> requests will fail if the <code>SimpleNetworkingStrategy</code> is used in an environment where there is more than one data center defined.</li>
</ul>
<p>Schema initialization and migration will be done automatically upon startup.</p>


<footer class="footline">
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1598595356"></script>
    <script src="/js/perfect-scrollbar.min.js?1598595356"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1598595356"></script>
    <script src="/js/jquery.sticky.js?1598595356"></script>
    <script src="/js/featherlight.min.js?1598595356"></script>
    <script src="/js/highlight.pack.js?1598595356"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1598595356"></script>
    <script src="/js/learn.js?1598595356"></script>
    <script src="/js/hugo-learn.js?1598595356"></script>

    <link href="/mermaid/mermaid.css?1598595356" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1598595356"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

